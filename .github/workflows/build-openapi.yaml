name: Run .NET Project with Swagger

on:
  push:
    branches:
      - vcluster/test-pipeline-new

jobs:
  run-dotnet-project:
    runs-on: ubuntu-latest
    steps:

      - name: Checkout code
        uses: actions/checkout@v4

      - name: look folder
        shell: bash
        run: ls -al ./domains && pwd

      - name: Docker build
        shell: bash
        run: docker build -t redoc .

      - name: Build and push Docker image
        uses: Energinet-Datahub/acorn-actions/actions/docker-build-and-push@v1
        with:
          dockerfile: ./domains/DockerFile
          image-name: redoc
          image-tag: latest
          docker-context: .
          dry-run: ${{ inputs.dry-run }}
